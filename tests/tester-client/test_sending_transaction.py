import pytest


CONTRACT_BIN = '0x6060604052610114806100126000396000f360606040526000357c01000000000000000000000000000000000000000000000000000000009004806316216f391461004f578063a5f3c23b14610072578063dcf537b1146100a75761004d565b005b61005c60048050506100d3565b6040518082815260200191505060405180910390f35b61009160048080359060200190919080359060200190919050506100e6565b6040518082815260200191505060405180910390f35b6100bd60048080359060200190919050506100fd565b6040518082815260200191505060405180910390f35b6000600d905080508090506100e3565b90565b6000818301905080508090506100f7565b92915050565b6000600782029050805080905061010f565b91905056'


CONTRACT_BIN_RUNTIME = '0x60606040526000357c01000000000000000000000000000000000000000000000000000000009004806316216f391461004f578063a5f3c23b14610072578063dcf537b1146100a75761004d565b005b61005c60048050506100d3565b6040518082815260200191505060405180910390f35b61009160048080359060200190919080359060200190919050506100e6565b6040518082815260200191505060405180910390f35b6100bd60048080359060200190919050506100fd565b6040518082815260200191505060405180910390f35b6000600d905080508090506100e3565b90565b6000818301905080508090506100f7565b92915050565b6000600782029050805080905061010f565b91905056'


@pytest.mark.parametrize(
    'txn_kwargs',
    (
        {},
        {'to': b'0x82a978b3f5962a5b0957d9ee9eef472ee55b42f1'},
        {'_from': b'0x82a978b3f5962a5b0957d9ee9eef472ee55b42f1'},
        {'to': None, 'data': CONTRACT_BIN},
    )
)
def test_coinbase(client, txn_kwargs):
    kwargs = {
        '_from': b'0x82a978b3f5962a5b0957d9ee9eef472ee55b42f1',
        'to': b'0x82a978b3f5962a5b0957d9ee9eef472ee55b42f1',
        'value': 1,
    }
    kwargs.update(txn_kwargs)

    txn_hash = client.send_transaction(**kwargs)
    assert txn_hash
